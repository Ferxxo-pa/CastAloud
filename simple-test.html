<!DOCTYPE html>
<html>
<head>
    <title>Simple React Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test { border: 1px solid #ccc; padding: 10px; margin: 10px 0; }
        .success { background: #d4edda; }
        .error { background: #f8d7da; }
    </style>
</head>
<body>
    <h1>React Loading Test</h1>
    <div id="test-container"></div>
    <div id="status"></div>

    <script type="module">
        const status = document.getElementById('status');
        
        function log(message, isError = false) {
            const div = document.createElement('div');
            div.className = `test ${isError ? 'error' : 'success'}`;
            div.textContent = message;
            status.appendChild(div);
        }

        try {
            log('Starting React test...');
            
            // Test 1: Import React
            const React = await import('/node_modules/react/index.js');
            log('✓ React imported successfully');
            
            // Test 2: Import ReactDOM
            const ReactDOM = await import('/node_modules/react-dom/client/index.js');
            log('✓ ReactDOM imported successfully');
            
            // Test 3: Create simple element
            const element = React.createElement('div', {
                style: { background: '#90EE90', padding: '10px', border: '2px solid green' }
            }, 'SUCCESS: React is working correctly!');
            
            // Test 4: Mount it
            const container = document.getElementById('test-container');
            const root = ReactDOM.createRoot(container);
            root.render(element);
            log('✓ React element mounted successfully');
            
            // Test 5: Test the main app imports
            setTimeout(async () => {
                try {
                    const App = await import('/src/App.tsx');
                    log('✓ Main App component imported');
                    
                    const appElement = React.createElement(App.default);
                    const appContainer = document.createElement('div');
                    appContainer.style.border = '2px solid blue';
                    appContainer.style.margin = '10px 0';
                    document.body.appendChild(appContainer);
                    
                    const appRoot = ReactDOM.createRoot(appContainer);
                    appRoot.render(appElement);
                    log('✓ Main App component rendered');
                    
                } catch (error) {
                    log('✗ Failed to import/render main App: ' + error.message, true);
                }
            }, 1000);
            
        } catch (error) {
            log('✗ React test failed: ' + error.message, true);
            console.error('React test error:', error);
        }
    </script>
</body>
</html>